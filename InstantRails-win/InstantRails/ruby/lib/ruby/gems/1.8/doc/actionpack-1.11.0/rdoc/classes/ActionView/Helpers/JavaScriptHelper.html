<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: ActionView::Helpers::JavaScriptHelper</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">ActionView::Helpers::JavaScriptHelper</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../../files/lib/action_view/helpers/javascript_helper_rb.html">
                lib/action_view/helpers/javascript_helper.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Provides a set of helpers for calling JavaScript functions and, most
importantly, to call remote methods using what has been labelled <a
href="http://www.adaptivepath.com/publications/essays/archives/000385.php">AJAX</a>.
This means that you can call actions in your controllers without reloading
the page, but still update certain parts of it using injections into the
DOM. The common use case is having a form that adds a new element to a list
without reloading the page.
</p>
<p>
To be able to use the JavaScript helpers, you must include the Prototype
JavaScript Framework and for some functions script.aculo.us (which both
come with Rails) on your pages. Choose one of these options:
</p>
<ul>
<li>Use <tt>&lt;%= javascript_include_tag :defaults %&gt;</tt> in the HEAD
section of your page (recommended): The function will return references to
the JavaScript files created by the <tt>rails</tt> command in your
<tt>public/javascripts</tt> directory. Using it is recommended as the
browser can then cache the libraries instead of fetching all the functions
anew on every request.

</li>
<li>Use <tt>&lt;%= javascript_include_tag &#8216;prototype&#8217; %&gt;</tt>:
As above, but will only include the Prototype core library, which means you
are able to use all basic AJAX functionality. For the script.aculo.us-based
JavaScript helpers, like visual effects, autocompletion, drag and drop and
so on, you should use the method described above.

</li>
<li>Use <tt>&lt;%= <a
href="JavaScriptHelper.html#M000875">define_javascript_functions</a>
%&gt;</tt>: this will copy all the JavaScript support functions within a
single script block.

</li>
</ul>
<p>
For documentation on <tt>javascript_include_tag</tt> see <a
href="AssetTagHelper.html">ActionView::Helpers::AssetTagHelper</a>.
</p>
<p>
If you&#8217;re the visual type, there&#8217;s an AJAX <a
href="http://www.rubyonrails.com/media/video/rails-ajax.mov">movie</a>
demonstrating the use of <a
href="JavaScriptHelper.html#M000870">form_remote_tag</a>.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000875">define_javascript_functions</a>&nbsp;&nbsp;
      <a href="#M000880">draggable_element</a>&nbsp;&nbsp;
      <a href="#M000881">drop_receiving_element</a>&nbsp;&nbsp;
      <a href="#M000882">escape_javascript</a>&nbsp;&nbsp;
      <a href="#M000873">evaluate_remote_response</a>&nbsp;&nbsp;
      <a href="#M000870">form_remote_tag</a>&nbsp;&nbsp;
      <a href="#M000883">javascript_tag</a>&nbsp;&nbsp;
      <a href="#M000867">link_to_function</a>&nbsp;&nbsp;
      <a href="#M000868">link_to_remote</a>&nbsp;&nbsp;
      <a href="#M000876">observe_field</a>&nbsp;&nbsp;
      <a href="#M000877">observe_form</a>&nbsp;&nbsp;
      <a href="#M000869">periodically_call_remote</a>&nbsp;&nbsp;
      <a href="#M000874">remote_function</a>&nbsp;&nbsp;
      <a href="#M000879">sortable_element</a>&nbsp;&nbsp;
      <a href="#M000871">submit_to_remote</a>&nbsp;&nbsp;
      <a href="#M000872">update_element_function</a>&nbsp;&nbsp;
      <a href="#M000878">visual_effect</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">


    <div id="constants-list">
      <h3 class="section-bar">Constants</h3>

      <div class="name-list">
        <table summary="Constants">
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">CALLBACKS</td>
          <td>=</td>
          <td class="context-item-value">[:uninitialized, :loading, :loaded, :interactive, :complete, :failure, :success].push((100..599).to_a).flatten</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">AJAX_OPTIONS</td>
          <td>=</td>
          <td class="context-item-value">[ :before, :after, :condition, :url, :asynchronous, :method,            :insertion, :position, :form, :with, :update, :script ].concat(CALLBACKS)</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">JAVASCRIPT_PATH</td>
          <td>=</td>
          <td class="context-item-value">File.join(File.dirname(__FILE__), 'javascripts')</td>
        </tr>
        </table>
      </div>
    </div>



      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000875" class="method-detail">
        <a name="M000875"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000875.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000875.html');return false;">
          <span class="method-name">define_javascript_functions</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Includes the Action Pack JavaScript libraries inside a single
&lt;script&gt; tag. The function first includes prototype.js and then its
core extensions, (determined by filenames starting with
&quot;prototype&quot;). Afterwards, any additional scripts will be included
in random order.
</p>
<p>
Note: The recommended approach is to copy the contents of
lib/action_view/helpers/javascripts/ into your application&#8217;s
public/javascripts/ directory, and use <tt>javascript_include_tag</tt> to
create remote &lt;script&gt; links.
</p>
        </div>
      </div>

      <div id="method-M000880" class="method-detail">
        <a name="M000880"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000880.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000880.html');return false;">
          <span class="method-name">draggable_element</span><span class="method-args">(element_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Makes the element with the DOM ID specified by <tt>element_id</tt>
draggable.
</p>
<p>
This method requires the inclusion of the script.aculo.us JavaScript
library.
</p>
<p>
Example:
</p>
<pre>
  &lt;%= draggable_element(&quot;my_image&quot;, :revert =&gt; true)
</pre>
<p>
You can change the behaviour with various options, see <a
href="http://script.aculo.us">script.aculo.us</a> for more documentation.
</p>
        </div>
      </div>

      <div id="method-M000881" class="method-detail">
        <a name="M000881"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000881.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000881.html');return false;">
          <span class="method-name">drop_receiving_element</span><span class="method-args">(element_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Makes the element with the DOM ID specified by <tt>element_id</tt> receive
dropped draggable elements (created by <a
href="JavaScriptHelper.html#M000880">draggable_element</a>). and make an
AJAX call By default, the action called gets the DOM ID of the element as
parameter.
</p>
<p>
This method requires the inclusion of the script.aculo.us JavaScript
library.
</p>
<p>
Example:
</p>
<pre>
  &lt;%= drop_receiving_element(&quot;my_cart&quot;, :url =&gt; { :controller =&gt; &quot;cart&quot;, :action =&gt; &quot;add&quot; }) %&gt;
</pre>
<p>
You can change the behaviour with various options, see <a
href="http://script.aculo.us">script.aculo.us</a> for more documentation.
</p>
        </div>
      </div>

      <div id="method-M000882" class="method-detail">
        <a name="M000882"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000882.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000882.html');return false;">
          <span class="method-name">escape_javascript</span><span class="method-args">(javascript)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Escape carrier returns and single and double quotes for JavaScript
segments.
</p>
        </div>
      </div>

      <div id="method-M000873" class="method-detail">
        <a name="M000873"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000873.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000873.html');return false;">
          <span class="method-name">evaluate_remote_response</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns &#8216;eval(request.responseText)&#8217; which is the Javascript
function that <a href="JavaScriptHelper.html#M000870">form_remote_tag</a>
can call in :complete to evaluate a multiple update return document using
<a href="JavaScriptHelper.html#M000872">update_element_function</a> calls.
</p>
        </div>
      </div>

      <div id="method-M000870" class="method-detail">
        <a name="M000870"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000870.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000870.html');return false;">
          <span class="method-name">form_remote_tag</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a form tag that will submit using XMLHttpRequest in the background
instead of the regular reloading POST arrangement. Even though it&#8217;s
using JavaScript to serialize the form elements, the form submission will
work just like a regular submission as viewed by the receiving side (all
elements available in @params). The options for specifying the target with
:url and defining callbacks is the same as <a
href="JavaScriptHelper.html#M000868">link_to_remote</a>.
</p>
<p>
A &quot;fall-through&quot; target for browsers that doesn&#8217;t do
JavaScript can be specified with the :action/:method options on :html
</p>
<pre>
  form_remote_tag :html =&gt; { :action =&gt; url_for(:controller =&gt; &quot;some&quot;, :action =&gt; &quot;place&quot;) }
</pre>
<p>
The Hash passed to the :html key is equivalent to the options (2nd)
argument in the <a
href="FormTagHelper.html#M000838">FormTagHelper.form_tag</a> method.
</p>
<p>
By default the fall-through action is the same as the one specified in the
:url (and the default method is :post).
</p>
        </div>
      </div>

      <div id="method-M000883" class="method-detail">
        <a name="M000883"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000883.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000883.html');return false;">
          <span class="method-name">javascript_tag</span><span class="method-args">(content)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a JavaScript tag with the <tt>content</tt> inside. Example:
</p>
<pre>
  javascript_tag &quot;alert('All is good')&quot; # =&gt; &lt;script type=&quot;text/javascript&quot;&gt;alert('All is good')&lt;/script&gt;
</pre>
        </div>
      </div>

      <div id="method-M000867" class="method-detail">
        <a name="M000867"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000867.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000867.html');return false;">
          <span class="method-name">link_to_function</span><span class="method-args">(name, function, html_options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a link that&#8217;ll trigger a javascript <tt>function</tt> using
the onclick handler and return false after the fact.
</p>
<p>
Examples:
</p>
<pre>
  link_to_function &quot;Greeting&quot;, &quot;alert('Hello world!')&quot;
  link_to_function(image_tag(&quot;delete&quot;), &quot;if confirm('Really?'){ do_delete(); }&quot;)
</pre>
        </div>
      </div>

      <div id="method-M000868" class="method-detail">
        <a name="M000868"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000868.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000868.html');return false;">
          <span class="method-name">link_to_remote</span><span class="method-args">(name, options = {}, html_options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a link to a remote action defined by <tt>options[:url]</tt> (using
the url_for format) that&#8217;s called in the background using
XMLHttpRequest. The result of that request can then be inserted into a DOM
object whose id can be specified with <tt>options[:update]</tt>. Usually,
the result would be a partial prepared by the controller with either
render_partial or render_partial_collection.
</p>
<p>
Examples:
</p>
<pre>
 link_to_remote &quot;Delete this post&quot;, :update =&gt; &quot;posts&quot;, :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id }
 link_to_remote(image_tag(&quot;refresh&quot;), :update =&gt; &quot;emails&quot;, :url =&gt; { :action =&gt; &quot;list_emails&quot; })
</pre>
<p>
You can also specify a hash for <tt>options[:update]</tt> to allow for easy
redirection of output to an other DOM element if a server-side error
occurs:
</p>
<p>
Example:
</p>
<pre>
 link_to_remote &quot;Delete this post&quot;,
     :url =&gt; { :action =&gt; &quot;destroy&quot;, :id =&gt; post.id },
     :update =&gt; { :success =&gt; &quot;posts&quot;, :failure =&gt; &quot;error&quot; }
</pre>
<p>
Optionally, you can use the <tt>options[:position]</tt> parameter to
influence how the target DOM element is updated. It must be one of
<tt>:before</tt>, <tt>:top</tt>, <tt>:bottom</tt>, or <tt>:after</tt>.
</p>
<p>
By default, these remote requests are processed asynchronous during which
various JavaScript callbacks can be triggered (for progress indicators and
the likes). All callbacks get access to the <tt>request</tt> object, which
holds the underlying XMLHttpRequest.
</p>
<p>
To access the server response, use <tt>request.responseText</tt>, to find
out the HTTP status, use <tt>request.status</tt>.
</p>
<p>
Example:
</p>
<pre>
  link_to_remote word,
      :url =&gt; { :action =&gt; &quot;undo&quot;, :n =&gt; word_counter },
      :complete =&gt; &quot;undoRequestCompleted(request)&quot;
</pre>
<p>
The callbacks that may be specified are (in order):
</p>
<table>
<tr><td valign="top"><tt>:loading</tt>:</td><td>Called when the remote document is being loaded with data by the browser.

</td></tr>
<tr><td valign="top"><tt>:loaded</tt>:</td><td>Called when the browser has finished loading the remote document.

</td></tr>
<tr><td valign="top"><tt>:interactive</tt>:</td><td>Called when the user can interact with the remote document, even though it
has not finished loading.

</td></tr>
<tr><td valign="top"><tt>:success</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is in
the 2XX range.

</td></tr>
<tr><td valign="top"><tt>:failure</tt>:</td><td>Called when the XMLHttpRequest is completed, and the HTTP status code is
not in the 2XX range.

</td></tr>
<tr><td valign="top"><tt>:complete</tt>:</td><td>Called when the XMLHttpRequest is complete (fires after success/failure if
they are present).,

</td></tr>
</table>
<p>
You can further refine <tt>:success</tt> and <tt>:failure</tt> by adding
additional callbacks for specific status codes:
</p>
<p>
Example:
</p>
<pre>
  link_to_remote word,
      :url =&gt; { :action =&gt; &quot;action&quot; },
      404 =&gt; &quot;alert('Not found...? Wrong URL...?')&quot;,
      :failure =&gt; &quot;alert('HTTP Error ' + request.status + '!')&quot;
</pre>
<p>
A status code callback overrides the success/failure handlers if present.
</p>
<p>
If you for some reason or another need synchronous processing
(that&#8217;ll block the browser while the request is happening), you can
specify <tt>options[:type] = :synchronous</tt>.
</p>
<p>
You can customize further browser side call logic by passing in JavaScript
code snippets via some optional parameters. In their order of use these
are:
</p>
<table>
<tr><td valign="top"><tt>:confirm</tt>:</td><td>Adds confirmation dialog.

</td></tr>
<tr><td valign="top"><tt>:condition</tt>:</td><td>Perform remote request conditionally by this expression. Use this to
describe browser-side conditions when request should not be initiated.

</td></tr>
<tr><td valign="top"><tt>:before</tt>:</td><td>Called before request is initiated.

</td></tr>
<tr><td valign="top"><tt>:after</tt>:</td><td>Called immediately after request was initiated and before
<tt>:loading</tt>.

</td></tr>
<tr><td valign="top"><tt>:submit</tt>:</td><td>Specifies the DOM element ID that&#8217;s used as the parent of the form
elements. By default this is the current form, but it could just as well be
the ID of a table row or any other DOM element.

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000876" class="method-detail">
        <a name="M000876"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000876.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000876.html');return false;">
          <span class="method-name">observe_field</span><span class="method-args">(field_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Observes the field with the DOM ID specified by <tt>field_id</tt> and makes
an AJAX call when its contents have changed.
</p>
<p>
Required <tt>options</tt> are:
</p>
<table>
<tr><td valign="top"><tt>:url</tt>:</td><td><tt>url_for</tt>-style options for the action to call when the field has
changed.

</td></tr>
</table>
<p>
Additional options are:
</p>
<table>
<tr><td valign="top"><tt>:frequency</tt>:</td><td>The frequency (in seconds) at which changes to this field will be detected.
Not setting this option at all or to a value equal to or less than zero
will use event based observation instead of time based observation.

</td></tr>
<tr><td valign="top"><tt>:update</tt>:</td><td>Specifies the DOM ID of the element whose innerHTML should be updated with
the XMLHttpRequest response text.

</td></tr>
<tr><td valign="top"><tt>:with</tt>:</td><td>A JavaScript expression specifying the parameters for the XMLHttpRequest.
This defaults to &#8216;value&#8217;, which in the evaluated context refers
to the new field value.

</td></tr>
</table>
<p>
Additionally, you may specify any of the options documented in <a
href="JavaScriptHelper.html#M000868">link_to_remote</a>.
</p>
        </div>
      </div>

      <div id="method-M000877" class="method-detail">
        <a name="M000877"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000877.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000877.html');return false;">
          <span class="method-name">observe_form</span><span class="method-args">(form_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Like <tt><a href="JavaScriptHelper.html#M000876">observe_field</a></tt>,
but operates on an entire form identified by the DOM ID <tt>form_id</tt>.
<tt>options</tt> are the same as <tt><a
href="JavaScriptHelper.html#M000876">observe_field</a></tt>, except the
default value of the <tt>:with</tt> option evaluates to the serialized
(request string) value of the form.
</p>
        </div>
      </div>

      <div id="method-M000869" class="method-detail">
        <a name="M000869"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000869.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000869.html');return false;">
          <span class="method-name">periodically_call_remote</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Periodically calls the specified url (<tt>options[:url]</tt>) every
<tt>options[:frequency]</tt> seconds (default is 10). Usually used to
update a specified div (<tt>options[:update]</tt>) with the results of the
remote call. The options for specifying the target with :url and defining
callbacks is the same as <a
href="JavaScriptHelper.html#M000868">link_to_remote</a>.
</p>
        </div>
      </div>

      <div id="method-M000874" class="method-detail">
        <a name="M000874"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000874.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000874.html');return false;">
          <span class="method-name">remote_function</span><span class="method-args">(options)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns the javascript needed for a remote function. Takes the same
arguments as <a href="JavaScriptHelper.html#M000868">link_to_remote</a>.
</p>
<p>
Example:
</p>
<pre>
  &lt;select id=&quot;options&quot; onchange=&quot;&lt;%= remote_function(:update =&gt; &quot;options&quot;, :url =&gt; { :action =&gt; :update_options }) %&gt;&quot;&gt;
    &lt;option value=&quot;0&quot;&gt;Hello&lt;/option&gt;
    &lt;option value=&quot;1&quot;&gt;World&lt;/option&gt;
  &lt;/select&gt;
</pre>
        </div>
      </div>

      <div id="method-M000879" class="method-detail">
        <a name="M000879"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000879.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000879.html');return false;">
          <span class="method-name">sortable_element</span><span class="method-args">(element_id, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Makes the element with the DOM ID specified by <tt>element_id</tt> sortable
by drag-and-drop and make an AJAX call whenever the sort order has changed.
By default, the action called gets the serialized sortable element as
parameters.
</p>
<p>
This method requires the inclusion of the script.aculo.us JavaScript
library.
</p>
<p>
Example:
</p>
<pre>
  &lt;%= sortable_element(&quot;my_list&quot;, :url =&gt; { :action =&gt; &quot;order&quot; }) %&gt;
</pre>
<p>
In the example, the action gets a &quot;my_list&quot; array parameter
containing the values of the ids of elements the sortable consists of, in
the current order.
</p>
<p>
You can change the behaviour with various options, see <a
href="http://script.aculo.us">script.aculo.us</a> for more documentation.
</p>
        </div>
      </div>

      <div id="method-M000871" class="method-detail">
        <a name="M000871"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000871.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000871.html');return false;">
          <span class="method-name">submit_to_remote</span><span class="method-args">(name, value, options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a button input tag that will submit form using XMLHttpRequest in
the background instead of regular reloading POST arrangement.
<tt>options</tt> argument is the same as in <tt><a
href="JavaScriptHelper.html#M000870">form_remote_tag</a></tt>
</p>
        </div>
      </div>

      <div id="method-M000872" class="method-detail">
        <a name="M000872"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000872.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000872.html');return false;">
          <span class="method-name">update_element_function</span><span class="method-args">(element_id, options = {}, &amp;block)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a Javascript function (or expression) that&#8217;ll update a DOM
element according to the options passed.
</p>
<ul>
<li><tt>:content</tt>: The content to use for updating. Can be left out if
using block, see example.

</li>
<li><tt>:action</tt>: Valid options are :update (assumed by default), :empty,
:remove

</li>
<li><tt>:position</tt> If the :action is :update, you can optionally specify
one of the following positions: :before, :top, :bottom, :after.

</li>
</ul>
<p>
Examples:
</p>
<pre>
  &lt;%= javascript_tag(update_element_function(
        &quot;products&quot;, :position =&gt; :bottom, :content =&gt; &quot;&lt;p&gt;New product!&lt;/p&gt;&quot;)) %&gt;

  &lt;% replacement_function = update_element_function(&quot;products&quot;) do %&gt;
    &lt;p&gt;Product 1&lt;/p&gt;
    &lt;p&gt;Product 2&lt;/p&gt;
  &lt;% end %&gt;
  &lt;%= javascript_tag(replacement_function) %&gt;
</pre>
<p>
This method can also be used in combination with remote method call where
the result is evaluated afterwards to cause multiple updates on a page.
Example:
</p>
<pre>
  # Calling view
  &lt;%= form_remote_tag :url =&gt; { :action =&gt; &quot;buy&quot; }, :complete =&gt; evaluate_remote_response %&gt;
  all the inputs here...

  # Controller action
  def buy
    @product = Product.find(1)
  end

  # Returning view
  &lt;%= update_element_function(
        &quot;cart&quot;, :action =&gt; :update, :position =&gt; :bottom,
        :content =&gt; &quot;&lt;p&gt;New Product: #{@product.name}&lt;/p&gt;&quot;)) %&gt;
  &lt;% update_element_function(&quot;status&quot;, :binding =&gt; binding) do %&gt;
    You've bought a new product!
  &lt;% end %&gt;
</pre>
<p>
Notice how the second call doesn&#8217;t need to be in an ERb output block
since it uses a block and passes in the binding to render directly. This
trick will however only work in ERb (not Builder or other template forms).
</p>
        </div>
      </div>

      <div id="method-M000878" class="method-detail">
        <a name="M000878"></a>

        <div class="method-heading">
          <a href="JavaScriptHelper.src/M000878.html" target="Code" class="method-signature"
            onclick="popupCode('JavaScriptHelper.src/M000878.html');return false;">
          <span class="method-name">visual_effect</span><span class="method-args">(name, element_id = false, js_options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Returns a JavaScript snippet to be used on the AJAX callbacks for starting
visual effects.
</p>
<p>
This method requires the inclusion of the script.aculo.us JavaScript
library.
</p>
<p>
Example:
</p>
<pre>
  &lt;%= link_to_remote &quot;Reload&quot;, :update =&gt; &quot;posts&quot;,
        :url =&gt; { :action =&gt; &quot;reload&quot; },
        :complete =&gt; visual_effect(:highlight, &quot;posts&quot;, :duration =&gt; 0.5 )
</pre>
<p>
If no element_id is given, it assumes &quot;element&quot; which should be a
local variable in the generated JavaScript execution context. This can be
used for example with <a
href="JavaScriptHelper.html#M000881">drop_receiving_element</a>:
</p>
<pre>
  &lt;%= drop_receving_element (...), :loading =&gt; visual_effect(:fade) %&gt;
</pre>
<p>
This would fade the element that was dropped on the drop receiving element.
</p>
<p>
You can change the behaviour with various options, see <a
href="http://script.aculo.us">script.aculo.us</a> for more documentation.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>