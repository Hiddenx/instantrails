<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: Fox::FXImage</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">Fox::FXImage</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/fox12/aliases_rb.html">
                lib/fox12/aliases.rb
                </a>
        <br />
                <a href="../../files/rdoc-sources/FXImage_rb.html">
                rdoc-sources/FXImage.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
An Image is a rectangular array of pixels. It supports two representations
of these pixels: a client-side pixel buffer which is stored as an array of
<a href="FXColor.html">FXColor</a>, and a server-side pixmap which is
stored in an organization directly compatible with the screen, for fast
drawing onto the device. The server-side representation is not directly
accessible from the current process as it lives in the process of the X
Server or GDI.
</p>
<h3>Image rendering hints</h3>
<table>
<tr><td valign="top"><tt>IMAGE_KEEP</tt>:</td><td>Keep pixel data in client. By default, FOX discards of the client-side
pixel data for an image after you call create() for that image. When the
<tt>IMAGE_KEEP</tt> option is set for <a href="FXImage.html">FXImage</a>
(or one of its subclasses), the client-side buffer is maintained. You will
typically want to set this option if you intend to do repeated re-rendering
of the image after it has been created.

</td></tr>
<tr><td valign="top"><tt>IMAGE_OWNED</tt>:</td><td>If the <tt>IMAGE_OWNED</tt> option is set, the <a
href="FXImage.html">FXImage</a> object assumes ownership of its client-side
pixel data (if any).

</td></tr>
<tr><td valign="top"><tt>IMAGE_DITHER</tt>:</td><td>Dither image to look better

</td></tr>
<tr><td valign="top"><tt>IMAGE_NEAREST</tt>:</td><td>Turn off dithering and map to nearest color

</td></tr>
<tr><td valign="top"><tt>IMAGE_OPAQUE</tt>:</td><td>Force opaque background

</td></tr>
<tr><td valign="top"><tt>IMAGE_ALPHACOLOR</tt>:</td><td>By default, FOX will use the transparency color obtained from the image
file as the transparency (alpha) color. If you pass the
<tt>IMAGE_ALPHACOLOR</tt> flag, the user-specified transparency color will
be used instead.

</td></tr>
<tr><td valign="top"><tt>IMAGE_SHMI</tt>:</td><td>Using shared memory image

</td></tr>
<tr><td valign="top"><tt>IMAGE_SHMP</tt>:</td><td>Using shared memory pixmap

</td></tr>
<tr><td valign="top"><tt>IMAGE_ALPHAGUESS</tt>:</td><td>Guess transparency color from corners

</td></tr>
</table>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000990">crop</a>&nbsp;&nbsp;
      <a href="#M000981">getPixel</a>&nbsp;&nbsp;
      <a href="#M000983">hasAlpha?</a>&nbsp;&nbsp;
      <a href="#M000992">loadPixels</a>&nbsp;&nbsp;
      <a href="#M000988">mirror</a>&nbsp;&nbsp;
      <a href="#M000980">new</a>&nbsp;&nbsp;
      <a href="#M000986">release</a>&nbsp;&nbsp;
      <a href="#M000985">render</a>&nbsp;&nbsp;
      <a href="#M000984">restore</a>&nbsp;&nbsp;
      <a href="#M000989">rotate</a>&nbsp;&nbsp;
      <a href="#M000991">savePixels</a>&nbsp;&nbsp;
      <a href="#M000987">scale</a>&nbsp;&nbsp;
      <a href="#M000982">setPixel</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">data</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
Pixel data [<a href="FXMemoryBuffer.html">FXMemoryBuffer</a>]

</td>
        </tr>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">options</td>
          <td class="context-item-value">&nbsp;[RW]&nbsp;</td>
          <td class="context-item-desc">
Option flags [Integer]

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000980" class="method-detail">
        <a name="M000980"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000980.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000980.html');return false;">
          <span class="method-name">new</span><span class="method-args">(a, pixels=nil, opts=0, w=1, h=1) {|theImage| ...}</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Create an image. If a client-side pixel buffer has been specified, the
image does not own the pixel buffer unless the <tt>IMAGE_OWNED</tt> flag is
set. If the <tt>IMAGE_OWNED</tt> flag is set but a <tt>nil</tt> pixel
buffer is passed, a pixel buffer will be automatically created and will be
owned by the image. The flags <tt>IMAGE_SHMI</tt> and <tt>IMAGE_SHMP</tt>
may be specified for large images to instruct <a
href="FXImage.html#M000985">render</a> to use shared memory to communicate
with the server.
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>a</tt>:</td><td>an application instance [<a href="FXApp.html">FXApp</a>]

</td></tr>
<tr><td valign="top"><tt>pixels</tt>:</td><td>pixels [Array of <a href="FXColor.html">FXColor</a> values]

</td></tr>
<tr><td valign="top"><tt>opts</tt>:</td><td>image options [Integer]

</td></tr>
<tr><td valign="top"><tt>w</tt>:</td><td>image width [Integer]

</td></tr>
<tr><td valign="top"><tt>h</tt>:</td><td>image height [Integer]

</td></tr>
</table>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000990" class="method-detail">
        <a name="M000990"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000990.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000990.html');return false;">
          <span class="method-name">crop</span><span class="method-args">(x, y, w, h)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Crop image to given rectangle
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>x</tt>:</td><td>x-coordinate for top left corner of the clip rectangle [Integer]

</td></tr>
<tr><td valign="top"><tt>y</tt>:</td><td>y-coordinate for top left corner of the clip rectangle [Integer]

</td></tr>
<tr><td valign="top"><tt>w</tt>:</td><td>width of the clip rectangle [Integer]

</td></tr>
<tr><td valign="top"><tt>h</tt>:</td><td>height of the clip rectangle [Integer]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000981" class="method-detail">
        <a name="M000981"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000981.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000981.html');return false;">
          <span class="method-name">getPixel</span><span class="method-args">(x, y)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Return the color of the pixel at (<em>x</em>, <em>y</em>).
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>x</tt>:</td><td>x-coordinate of the pixel of interest [Integer]

</td></tr>
<tr><td valign="top"><tt>y</tt>:</td><td>y-coordinate of the pixel of interest [Integer]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000983" class="method-detail">
        <a name="M000983"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000983.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000983.html');return false;">
          <span class="method-name">hasAlpha?</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Scan the image and return <tt>false</tt> if it&#8217;s fully opaque.
</p>
        </div>
      </div>

      <div id="method-M000992" class="method-detail">
        <a name="M000992"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000992.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000992.html');return false;">
          <span class="method-name">loadPixels</span><span class="method-args">(store)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Load pixel data from a stream.
</p>
<p>
Note that the base class version of <a
href="FXImage.html#M000992">loadPixels</a> expects to read the the pixel
data in a neutral format (i.e. without any image format specific
information). For example, if you have a 1024x768 image without an alpha
channel (and thus only the red, green and blue channels), <a
href="FXImage.html#M000992">loadPixels</a> will attempt to read a total of
1024*768*3*8 bytes from the stream. The behavior of <a
href="FXImage.html#M000992">loadPixels</a> is different for subclasses such
as <a href="FXPNGImage.html">FXPNGImage</a>, where <a
href="FXImage.html#M000992">loadPixels</a> will instead expects to read the
image data in a specific image file format (i.e. the PNG file format).
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>store</tt>:</td><td>opened stream from which to read the pixel data [<a
href="FXStream.html">FXStream</a>]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000988" class="method-detail">
        <a name="M000988"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000988.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000988.html');return false;">
          <span class="method-name">mirror</span><span class="method-args">(horizontal, vertical)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Mirror image horizontally and/or vertically.
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>horizontal</tt>:</td><td>if <tt>true</tt>, the image will be flipped from left to right [Boolean]

</td></tr>
<tr><td valign="top"><tt>vertical</tt>:</td><td>if <tt>true</tt>, the image will be flipped from top to bottom [Boolean]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000986" class="method-detail">
        <a name="M000986"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000986.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000986.html');return false;">
          <span class="method-name">release</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Release the client-side pixels buffer, free it if it was owned (i.e. if the
<tt>IMAGE_OWNED</tt> option is set).. If it is not owned, the image just
forgets about the buffer.
</p>
        </div>
      </div>

      <div id="method-M000985" class="method-detail">
        <a name="M000985"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000985.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000985.html');return false;">
          <span class="method-name">render</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Render the image from client-side pixel buffer, if there is data and if the
image width and height are greater than zero.
</p>
        </div>
      </div>

      <div id="method-M000984" class="method-detail">
        <a name="M000984"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000984.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000984.html');return false;">
          <span class="method-name">restore</span><span class="method-args">()</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Restore client-side pixel buffer from image. This operation overwrites any
current values for the client-side pixel buffer with values corresponding
to the server-side image. If the image data is <tt>nil</tt> at the time <a
href="FXImage.html#M000984">restore</a> is called, the image will first
allocate an (owned) pixel buffer to use for this operation.
</p>
        </div>
      </div>

      <div id="method-M000989" class="method-detail">
        <a name="M000989"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000989.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000989.html');return false;">
          <span class="method-name">rotate</span><span class="method-args">(degrees)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Rotate image counter-clockwise by some number of degrees.
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>degrees</tt>:</td><td>number of degrees by which to rotate the image [Integer]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000991" class="method-detail">
        <a name="M000991"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000991.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000991.html');return false;">
          <span class="method-name">savePixels</span><span class="method-args">(store)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Save pixel data to a stream.
</p>
<p>
Note that the base class version of <a
href="FXImage.html#M000991">savePixels</a> saves the pixel data as-is,
without any image format specific information. For example, if you have a
1024x768 image without an alpha channel (and thus only the red, green and
blue channels) the total number of bytes written to the stream will be
1024*768*3*8. The behavior of <a href="FXImage.html#M000991">savePixels</a>
is different for subclasses such as <a
href="FXPNGImage.html">FXPNGImage</a>, where <a
href="FXImage.html#M000991">savePixels</a> will instead save the image data
in a specific image file format (i.e. the PNG file format).
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>store</tt>:</td><td>opened stream to which to save the pixel data [<a
href="FXStream.html">FXStream</a>]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000987" class="method-detail">
        <a name="M000987"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000987.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000987.html');return false;">
          <span class="method-name">scale</span><span class="method-args">(w, h, quality=0)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Rescale pixels image to the specified width and height. Note that this
serves a slightly different purpose than the base class resize() method,
which simply resizes the client-side pixel data buffer but doesn&#8217;t
transform the image.
</p>
<p>
The optional third argument specifies the <em>quality</em> of the scaling
algorithm used. By default, <a href="FXImage.html#M000987">scale</a> uses a
fast (but low quality) nearest-neighbor algorithm for scaling the image to
its new size. To use the higher-quality scaling algorithm from FOX 1.0, you
should pass in a value of 1 as the third argument to <a
href="FXImage.html#M000987">scale</a>.
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>w</tt>:</td><td>new image width, in pixels [Integer]

</td></tr>
<tr><td valign="top"><tt>h</tt>:</td><td>new image height, in pixels [Integer]

</td></tr>
<tr><td valign="top"><tt>quality</tt>:</td><td>scaling algorithm quality, either 0 or 1 (see above) [Integer]

</td></tr>
</table>
        </div>
      </div>

      <div id="method-M000982" class="method-detail">
        <a name="M000982"></a>

        <div class="method-heading">
          <a href="FXImage.src/M000982.html" target="Code" class="method-signature"
            onclick="popupCode('FXImage.src/M000982.html');return false;">
          <span class="method-name">setPixel</span><span class="method-args">(x, y, clr)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Set pixel at (<em>x</em>, <em>y</em>) to <em>clr</em>.
</p>
<h4>Parameters:</h4>
<table>
<tr><td valign="top"><tt>x</tt>:</td><td>x-coordinate of the pixel of interest [Integer]

</td></tr>
<tr><td valign="top"><tt>y</tt>:</td><td>y-coordinate of the pixel of interest [Integer]

</td></tr>
<tr><td valign="top"><tt>clr</tt>:</td><td>new color value for this pixel [<a href="FXColor.html">FXColor</a>]

</td></tr>
</table>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>