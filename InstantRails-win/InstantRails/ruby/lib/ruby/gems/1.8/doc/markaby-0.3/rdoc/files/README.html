
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
  <title>File: README</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
    <script language="JavaScript" type="text/javascript">
    // <![CDATA[

    function toggleSource( id )
    {
    var elem
    var link

    if( document.getElementById )
    {
    elem = document.getElementById( id )
    link = document.getElementById( "l_" + id )
    }
    else if ( document.all )
    {
    elem = eval( "document.all." + id )
    link = eval( "document.all.l_" + id )
    }
    else
    return false;

    if( elem.style.display == "block" )
    {
    elem.style.display = "none"
    link.innerHTML = "show source"
    }
    else
    {
    elem.style.display = "block"
    link.innerHTML = "hide source"
    }
    }

    function openCode( url )
    {
    window.open( url, "SOURCE_CODE", "width=400,height=400,scrollbars=yes" )
    }
    // ]]>
    </script>
</head>
<body>
<div id="menu">
<div id="links">
    <a href="http://redhanded.hobix.com/bits/campingAMicroframework.html">backstory</a> |
    <a href="http://code.whytheluckystiff.net/camping/">wiki</a> |
    <a href="http://code.whytheluckystiff.net/camping/newticket">bugs</a> |
    <a href="http://code.whytheluckystiff.net/svn/camping/">svn</a>
</div>
<h3 class="title">File: README</h3>
</div>
<div id="fullpage">
<div id="logo"><img src="../Camping.gif" /></div>
<div id="pager">
<strong>Files:</strong>
<a href="../files/lib/markaby/builder_rb.html" value="File: builder.rb">lib/markaby/builder.rb</a>
<a href="../files/lib/markaby/cssproxy_rb.html" value="File: cssproxy.rb">lib/markaby/cssproxy.rb</a>
<a href="../files/lib/markaby/helper_rb.html" value="File: helper.rb">lib/markaby/helper.rb</a>
<a href="../files/lib/markaby/metaid_rb.html" value="File: metaid.rb">lib/markaby/metaid.rb</a>
<a href="../files/lib/markaby/tags_rb.html" value="File: tags.rb">lib/markaby/tags.rb</a>
<a href="../files/lib/markaby/template_rb.html" value="File: template.rb">lib/markaby/template.rb</a>
<a href="../files/lib/markaby/view_rb.html" value="File: view.rb">lib/markaby/view.rb</a>
<a href="../files/lib/markaby_rb.html" value="File: markaby.rb">lib/markaby.rb</a>
<a href="../files/README.html" value="File: README">README</a>
|
<strong>classes:</strong>
<a href="../classes/Object.html" title="Class: Object">Object</a>
<a href="../classes/Markaby.html" title="Module: Markaby">Markaby</a>
<a href="../classes/Markaby/ActionControllerHelper.html" title="Module: Markaby::ActionControllerHelper">Markaby::ActionControllerHelper</a>
<a href="../classes/Markaby/CssProxy.html" title="Class: Markaby::CssProxy">Markaby::CssProxy</a>
<a href="../classes/Markaby/Builder.html" title="Class: Markaby::Builder">Markaby::Builder</a>
<a href="../classes/Markaby/Template.html" title="Class: Markaby::Template">Markaby::Template</a>
<a href="../classes/Markaby/View.html" title="Class: Markaby::View">Markaby::View</a>
</ul>
</div>

    <div id="README" class="page_shade">
<div class="page">
<div class="header">
  <div class="path">README / Wed Mar 29 14:31:16 Central Standard Time 2006</div>
</div>

<h1><a href="../classes/Markaby.html">Markaby</a> (Markup as Ruby)</h1>
<p>
<a href="../classes/Markaby.html">Markaby</a> is a very short bit of code
for writing HTML pages in pure Ruby. It is an alternative to ERb which
weaves the two languages together. Also a replacement for templating
languages which use primitive languages that blend with HTML.
</p>
<h2>Using <a href="../classes/Markaby.html">Markaby</a> as a Rails plugin</h2>
<p>
Write Rails templates in pure Ruby. Example layout:
</p>
<pre>
  html do
    head do
      title 'Products: ' + action_name
      stylesheet_link_tag 'scaffold'
    end

    body do
      p flash[:notice], :style =&gt; &quot;color: green&quot;

      self &lt;&lt; content_for_layout
    end
  end
</pre>
<h2>Using <a href="../classes/Markaby.html">Markaby</a> as a Ruby class</h2>
<p>
<a href="../classes/Markaby.html">Markaby</a> is flaming easy to call from
your Ruby classes.
</p>
<pre>
  require 'markaby'

  mab = Markaby::Builder.new
  mab.html do
    head { title &quot;Boats.com&quot; }
    body do
      h1 &quot;Boats.com has great deals&quot;
      ul do
        li &quot;$49 for a canoe&quot;
        li &quot;$39 for a raft&quot;
        li &quot;$29 for a huge boot that floats and can fit 5 people&quot;
      end
    end
  end
  puts mab.to_s
</pre>
<p>
<a href="../classes/Markaby/Builder.html#M000071">Markaby::Builder.new</a>
does take two arguments for passing in variables and a helper object. You
can also affix the block right on to the class.
</p>
<p>
See <a href="../classes/Markaby/Builder.html">Markaby::Builder</a> for all
of that.
</p>
<h1>A Note About <tt>instance_eval</tt></h1>
<p>
The <a href="../classes/Markaby/Builder.html">Markaby::Builder</a> class is
different from the normal Builder class, since it uses
<tt>instance_eval</tt> when running blocks. This cleans up the appearance
of the <a href="../classes/Markaby.html">Markaby</a> code you write. If
<tt>instance_eval</tt> was not used, the code would look like this:
</p>
<pre>
  mab = Markaby::Builder.new
  mab.html do
    mab.head { mab.title &quot;Boats.com&quot; }
    mab.body do
      mab.h1 &quot;Boats.com has great deals&quot;
    end
  end
  puts mab.to_s
</pre>
<p>
So, the advantage is the cleanliness of your code. The disadvantage is that
the block will run inside the <a
href="../classes/Markaby/Builder.html">Markaby::Builder</a> object&#8217;s
scope. This means that inside these blocks, <tt>self</tt> will be your <a
href="../classes/Markaby/Builder.html">Markaby::Builder</a> object. When
you use instance variables in these blocks, they will be instance variables
of the <a href="../classes/Markaby/Builder.html">Markaby::Builder</a>
object.
</p>
<p>
This doesn&#8217;t effect Rails users, but when used in regular Ruby code,
it can be a bit disorienting. You are recommended to put your <a
href="../classes/Markaby.html">Markaby</a> code in a module where it
won&#8217;t mix with anything.
</p>
<h1>A Note About Rails Helpers</h1>
<p>
When used in Rails templates, the Rails helper object is passed into <a
href="../classes/Markaby/Builder.html">Markaby::Builder</a>. When you call
helper methods inside <a href="../classes/Markaby.html">Markaby</a>, the
output from those methods will be output to the stream. This is incredibly
handy, since most Rails helpers output HTML tags.
</p>
<pre>
  head do
    javascript_include_tag 'prototype'
    autodiscovery_link_tag
  end
</pre>
<p>
However, some methods are designed to give back a String which you can use
elsewhere. Call the <tt>@helpers</tt> object with the method and
you&#8217;ll get the String back and nothing will be output.
</p>
<pre>
  p &quot;Total is: #{@helper.number_to_human_size @file_bytes}&quot;
</pre>
<p>
Conversely, you may call instance variables from your controller by using a
method and its value will be returned, nothing will be output.
</p>
<pre>
  # Inside imaginary ProductController
  def list
    @products = Product.find :all
  end

  # Inside app/views/product/list.mab
  products.each do |product|
    p product.title
  end
</pre>
<h1>A Quick Tour</h1>
<p>
If you dive right into <a href="../classes/Markaby.html">Markaby</a>,
it&#8217;ll probably make good sense, but you&#8217;re likely to run into a
few kinks. Keep these pointers in mind and everything will be fine.
</p>
<h2>Element Classes</h2>
<p>
Element classes may be added by hooking methods onto container elements:
</p>
<pre>
  div.entry do
    h2.entryTitle 'Son of WebPage'
    div.entrySection %{by Anthony}
    div.entryContent 'Okay, once again, the idea here is ...'
  end
</pre>
<p>
Which results in:
</p>
<pre>
  &lt;div class=&quot;entry&quot;&gt;
    &lt;h2 class=&quot;entryTitle&quot;&gt;Son of WebPage&lt;/h2&gt;
    &lt;div class=&quot;entrySection&quot;&gt;by Anthony&lt;/div&gt;
    &lt;div class=&quot;entryContent&quot;&gt;Okay, once again, the idea here is ...&lt;/div&gt;
  &lt;/div&gt;
</pre>
<h2>Element IDs</h2>
<p>
IDs may be added by the use of bang methods:
</p>
<pre>
  div.page!
    div.content!
      h1 &quot;A Short Short Saintly Dog&quot;
    end
  end
</pre>
<p>
Which results in:
</p>
<pre>
  &lt;div id=&quot;page&quot;&gt;
    &lt;div id=&quot;content&quot;&gt;
      &lt;h1&gt;A Short Short Saintly Dog&lt;/h1&gt;
    &lt;/div&gt;
  &lt;/div&gt;
</pre>
<h2><a href="../classes/Markaby.html">Markaby</a> assumes XHTML 1.0 Transitional</h2>
<p>
Output defaults to XHTML 1.0 Transitional. To do XHTML 1.0 Strict, try
this:
</p>
<pre>
  xhtml_strict do
    # innerds
  end
</pre>
<h2>The <tt>capture</tt> Method</h2>
<p>
Want to catch a block of HTML as a string and play with it a bit? Use the
<tt>capture</tt> method.
</p>
<p>
Commonly used to join HTML blocks together:
</p>
<pre>
  div.menu! \
    ['5.gets', 'bits', 'cult', 'inspect', '-h'].map do |category|
      capture { link_to category }
    end.
    join( &quot; | &quot; )
</pre>
<h2>The <tt>tag!</tt> Method</h2>
<p>
If you need to force a tag at any time, call <tt>tag!</tt> with the tag
name followed by the possible arguments and block. The CssProxy won&#8217;t
work with this technique.
</p>
<pre>
  tag! :select, :id =&gt; &quot;country_list&quot; do
    countries.each do |country|
      tag! :option, country
    end
  end
</pre>
<h1>Credits</h1>
<p>
<a href="../classes/Markaby.html">Markaby</a> is a work of immense hope by
Tim Fletcher and why the lucky stiff. Thankyou for giving it a whirl.
</p>
<p>
<a href="../classes/Markaby.html">Markaby</a> is inspired by the HTML
library within cgi.rb. Hopefully it will turn around and take some cues.
</p>


<h4>Requires:</h4>
<ul>
<li>rubygems</li>
<li>builder</li>
<li>markaby/builder</li>
<li>markaby/cssproxy</li>
<li>markaby/metaid</li>
<li>markaby/tags</li>
<li>markaby/template</li>
</ul>





</div>
</div>


</div>
</body>
</html>