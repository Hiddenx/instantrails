<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ActionMailer::Base</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href="../.././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ActionMailer::Base</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../../files/lib/action_mailer/base_rb.html">
                lib/action_mailer/base.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
Usage:
</p>
<pre>
  class ApplicationMailer &lt; ActionMailer::Base
    # Set up properties
    # Properties can also be specified via accessor methods
    # (i.e. self.subject = &quot;foo&quot;) and instance variables (@subject = &quot;foo&quot;).
    def signup_notification(recipient)
      recipients recipient.email_address_with_name
      subject    &quot;New account information&quot;
      body       { &quot;account&quot; =&gt; recipient }
      from       &quot;system@example.com&quot;
    end

    # explicitly specify multipart messages
    def signup_notification(recipient)
      recipients      recipient.email_address_with_name
      subject         &quot;New account information&quot;
      from            &quot;system@example.com&quot;

      part :content_type =&gt; &quot;text/html&quot;,
        :body =&gt; render_message(&quot;signup-as-html&quot;, :account =&gt; recipient)

      part &quot;text/plain&quot; do |p|
        p.body = render_message(&quot;signup-as-plain&quot;, :account =&gt; recipient)
        p.transfer_encoding = &quot;base64&quot;
      end
    end

    # attachments
    def signup_notification(recipient)
      recipients      recipient.email_address_with_name
      subject         &quot;New account information&quot;
      from            &quot;system@example.com&quot;

      attachment :content_type =&gt; &quot;image/jpeg&quot;,
        :body =&gt; File.read(&quot;an-image.jpg&quot;)

      attachment &quot;application/pdf&quot; do |a|
        a.body = generate_your_pdf_here()
      end
    end

    # implicitly multipart messages
    def signup_notification(recipient)
      recipients      recipient.email_address_with_name
      subject         &quot;New account information&quot;
      from            &quot;system@example.com&quot;
      body(:account =&gt; &quot;recipient&quot;)

      # ActionMailer will automatically detect and use multipart templates,
      # where each template is named after the name of the action, followed
      # by the content type. Each such detected template will be added as
      # a separate part to the message.
      #
      # for example, if the following templates existed:
      #   * signup_notification.text.plain.rhtml
      #   * signup_notification.text.html.rhtml
      #   * signup_notification.text.xml.rxml
      #   * signup_notification.text.x-yaml.rhtml
      #
      # Each would be rendered and added as a separate part to the message,
      # with the corresponding content type. The same body hash is passed to
      # each template.
    end
  end

  # After this, post_notification will look for &quot;templates/application_mailer/post_notification.rhtml&quot;
  ApplicationMailer.template_root = &quot;templates&quot;

  ApplicationMailer.create_comment_notification(david, hello_world)  # =&gt; a tmail object
  ApplicationMailer.deliver_comment_notification(david, hello_world) # sends the email
</pre>
<h1>Configuration options</h1>
<p>
These options are specified on the class level, like
<tt>ActionMailer::Base.template_root = &quot;/my/templates&quot;</tt>
</p>
<ul>
<li><tt>template_root</tt> - template root determines the base from which
template references will be made.

</li>
<li><tt>logger</tt> - the logger is used for generating information on the
mailing run if available. Can be set to nil for no logging. Compatible with
both Ruby&#8217;s own Logger and Log4r loggers.

</li>
<li><tt>server_settings</tt> - Allows detailed configuration of the server:

<ul>
<li><tt>:address</tt> Allows you to use a remote mail server. Just change it
from its default &quot;localhost&quot; setting.

</li>
<li><tt>:port</tt> On the off chance that your mail server doesn&#8217;t run on
port 25, you can change it.

</li>
<li><tt>:domain</tt> If you need to specify a HELO domain, you can do it here.

</li>
<li><tt>:user_name</tt> If your mail server requires authentication, set the
username in this setting.

</li>
<li><tt>:password</tt> If your mail server requires authentication, set the
password in this setting.

</li>
<li><tt>:authentication</tt> If your mail server requires authentication, you
need to specify the authentication type here. This is a symbol and one of
:plain, :login, :cram_md5

</li>
</ul>
</li>
<li><tt>raise_delivery_errors</tt> - whether or not errors should be raised if
the email fails to be delivered.

</li>
<li><tt>delivery_method</tt> - Defines a delivery method. Possible values are
:smtp (default), :sendmail, and :test. Sendmail is assumed to be present at
&quot;/usr/sbin/sendmail&quot;.

</li>
<li><tt>perform_deliveries</tt> - Determines whether deliver_* methods are
actually carried out. By default they are, but this can be turned off to
help functional testing.

</li>
<li><tt>deliveries</tt> - Keeps an array of all the emails sent out through the
Action Mailer with delivery_method :test. Most useful for unit and
functional testing.

</li>
<li><tt>default_charset</tt> - The default charset used for the body and to
encode the subject. Defaults to UTF-8. You can also pick a different
charset from inside a method with <tt>@charset</tt>.

</li>
<li><tt>default_content_type</tt> - The default content type used for the main
part of the message. Defaults to &quot;text/plain&quot;. You can also pick
a different content type from inside a method with <tt>@content_type</tt>.

</li>
<li><tt>default_mime_version</tt> - The default mime version used for the
message. Defaults to nil. You can also pick a different value from inside a
method with <tt>@mime_version</tt>. When multipart messages are in use,
<tt>@mime_version</tt> will be set to &quot;1.0&quot; if it is not set
inside a method.

</li>
<li><tt>default_implicit_parts_order</tt> - When a message is built implicitly
(i.e. multiple parts are assembled from templates which specify the content
type in their filenames) this variable controls how the parts are ordered.
Defaults to [&quot;text/html&quot;, &quot;text/enriched&quot;,
&quot;text/plain&quot;]. Items that appear first in the array have higher
priority in the mail client and appear last in the mime encoded message.
You can also pick a different order from inside a method with
<tt>@implicit_parts_order</tt>.

</li>
</ul>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M001383">deliver</a>&nbsp;&nbsp;
      <a href="#M001384">deliver!</a>&nbsp;&nbsp;
      <a href="#M001382">receive</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->
    <div id="includes">
      <h3 class="section-bar">Included Modules</h3>

      <div id="includes-list">
        <span class="include-name">AdvAttrAccessor</span>
        <span class="include-name"><a href="PartContainer.html">PartContainer</a></span>
      </div>
    </div>

    <div id="section">





    <div id="attribute-list">
      <h3 class="section-bar">Attributes</h3>

      <div class="name-list">
        <table>
        <tr class="top-aligned-row context-row">
          <td class="context-item-name">mail</td>
          <td class="context-item-value">&nbsp;[R]&nbsp;</td>
          <td class="context-item-desc">
The mail object instance referenced by this mailer.

</td>
        </tr>
        </table>
      </div>
    </div>
      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M001383" class="method-detail">
        <a name="M001383"></a>

        <div class="method-heading">
          <a href="Base.src/M001383.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M001383.html');return false;">
          <span class="method-name">deliver</span><span class="method-args">(mail)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Deliver the given mail object directly. This can be used to deliver a
preconstructed mail object, like:
</p>
<pre>
  email = MyMailer.create_some_mail(parameters)
  email.set_some_obscure_header &quot;frobnicate&quot;
  MyMailer.deliver(email)
</pre>
        </div>
      </div>

      <div id="method-M001382" class="method-detail">
        <a name="M001382"></a>

        <div class="method-heading">
          <a href="Base.src/M001382.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M001382.html');return false;">
          <span class="method-name">receive</span><span class="method-args">(raw_email)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Receives a raw email, parses it into an email object, decodes it,
instantiates a new mailer, and passes the email object to the mailer
object&#8217;s <a href="Base.html#M001382">receive</a> method. If you want
your mailer to be able to process incoming messages, you&#8217;ll need to
implement a <a href="Base.html#M001382">receive</a> method that accepts the
email object as a parameter:
</p>
<pre>
  class MyMailer &lt; ActionMailer::Base
    def receive(mail)
      ...
    end
  end
</pre>
        </div>
      </div>

      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M001384" class="method-detail">
        <a name="M001384"></a>

        <div class="method-heading">
          <a href="Base.src/M001384.html" target="Code" class="method-signature"
            onclick="popupCode('Base.src/M001384.html');return false;">
          <span class="method-name">deliver!</span><span class="method-args">(mail = @mail)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Delivers a <a href="../TMail/Mail.html">TMail::Mail</a> object. By default,
it delivers the cached mail object (from the create! method). If no cached
mail object exists, and no alternate has been given as the parameter, this
will fail.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>